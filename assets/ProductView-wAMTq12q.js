import{H as w}from"./HeaderComponent-8IuSVmBz.js";import{F as V}from"./FooterComponent-5W3hQlMA.js";import{L as F}from"./LoadingComponent-TT3uClr5.js";import{P as H}from"./ProductCard-MyGIloXO.js";import{_ as k,e as i,f as _,j as b,u as e,m as t,i as d,t as c,F as f,k as P,s as u}from"./index-yjNCV7Si.js";import"./FixedIcon-dLuHla_K.js";const S={components:{HeaderComponent:w,LoadingComponent:F,FooterComponent:V,ProductCard:H},data(){return{isLoading:!1,product:[],chineseTab:[],englishTab:[],user:{num:1},products:[],isChange:!1}},inject:["toast","changeTabs"],methods:{async getProduct(a){this.isLoading=!0,await this.axios.get("https://vue3-course-api.hexschool.io//v2/api/rongapi/products/all").then(r=>{if(r.data.success){this.product=r.data.products.filter(s=>s.id===a);const l=r.data.products.filter(s=>s.category.match(this.chineseTab));this.products=l.slice(0,4),this.changeTabs(this.product,/[\u4e00-\u9fa5]/,this.chineseTab),this.changeTabs(this.product,/[a-zA-Z]/,this.englishTab),this.englishTab=String(this.englishTab),this.chineseTab=String(this.chineseTab)}else this.toast("error","尚未抓到資料");this.isLoading=!1}).catch(r=>{this.toast("error","尚未抓到資料"),console.error("product-getProduct error",r),this.isLoading=!1})},productSubmit(a){this.isChange=!1;const o=this.$route.params.productId;this.axios.post("https://vue3-course-api.hexschool.io//v2/api/rongapi/cart",{data:{product_id:o,qty:a.number}}).then(l=>{l.data.success?(this.toast("success","成功加入購物車"),this.isChange=!0):this.toast("error","失敗，請重新操作")}).catch(l=>{this.toast("error","失敗，請重新操作"),console.error("product-productSubmit error",l)})},count(a){a===!0?this.$refs.count[0].value>=10||this.$refs.count[0].value++:this.$refs.count[0].value<=1||this.$refs.count[0].value--}},created(){this.getProduct(this.$route.params.productId)}},M={class:"has-header-layout"},N={class:"container py-40 py-lg-80"},j={"aria-label":"breadcrumb",class:"mb-4"},B={class:"breadcrumb"},$={class:"breadcrumb-item text-uppercase"},q={class:"breadcrumb-item text-uppercase"},E={class:"breadcrumb-item"},I={class:"breadcrumb-item active","aria-current":"page"},R={class:"col-12 col-lg-5"},U=["src","alt"],z={class:"col-12 col-lg-7"},A={class:"ff-serif fw-bold mb-4 mt-4 mt-lg-0"},D={class:"mb-4"},O={class:"fs-5 me-3"},Z={class:"text-decoration-line-through opacity-50"},G=t("hr",null,null,-1),J=["innerHTML"],K=t("br",null,null,-1),Q=["innerHTML"],W={class:"width-150 align-content-center"},X={class:"d-flex justify-content-between max-width-120"},Y=["disabled"],tt=t("span",{class:"material-symbols-outlined fs-5"}," remove ",-1),st=[tt],et=["disabled"],ot=t("span",{class:"material-symbols-outlined fs-5"}," add",-1),nt=[ot],it=t("button",{type:"submit",class:"btn btn-primary border-0"}," 加入購物車 ",-1),rt={class:"align-items-center mt-40 mt-lg-80"},ct=t("div",{class:"d-flex align-items-center"},[t("h3",{class:"text-nowrap"},"相關商品"),t("span",{class:"w-100 bg-primary mx-3",style:{height:"1px"}})],-1);function at(a,o,r,l,s,h){const g=i("HeaderComponent"),x=i("LoadingComponent"),T=i("RouterView"),p=i("router-link"),C=i("VField"),v=i("VForm"),y=i("ProductCard"),L=i("FooterComponent");return _(),b(f,null,[e(g,{isChange:s.isChange},null,8,["isChange"]),e(x,{isLoading:s.isLoading},null,8,["isLoading"]),e(T),t("main",M,[t("section",N,[t("nav",j,[t("ol",B,[t("li",$,[e(p,{to:"/"},{default:d(()=>[u("HOME")]),_:1})]),t("li",q,[e(p,{to:`/products/${s.englishTab}`},{default:d(()=>[u(c(s.englishTab),1)]),_:1},8,["to"])]),t("li",E,[e(p,{to:`/products/${s.chineseTab}`},{default:d(()=>[u(c(s.chineseTab)+"類",1)]),_:1},8,["to"])]),t("li",I,c(s.product[0].title),1)])]),(_(!0),b(f,null,P(s.product,n=>(_(),b("div",{class:"row",key:n.id},[t("div",R,[t("img",{src:n.imageUrl,alt:n.id,class:"img-fluid",width:"320",height:"320"},null,8,U)]),t("div",z,[t("h2",A,c(n.title),1),t("div",D,[t("span",O,"NT$ "+c(n.price),1),t("span",Z,"NT$ "+c(n.origin_price),1)]),G,t("p",{class:"m-0",innerHTML:n.description},null,8,J),K,t("p",{class:"m-0",innerHTML:n.content},null,8,Q),e(v,{onSubmit:h.productSubmit,class:"d-flex align-item-center mt-5"},{default:d(()=>[t("span",W,[t("div",X,[t("button",{type:"button",class:"d-flex bg-transparent d-flex p-0 border-0",disabled:s.user.num<=1,onClick:o[0]||(o[0]=m=>h.count(!1))},st,8,Y),e(C,{name:"number",type:"number",class:"fs-5",modelValue:s.user.num,"onUpdate:modelValue":o[1]||(o[1]=m=>s.user.num=m),rules:"required",ref_for:!0,ref:"count"},{default:d(()=>[u(c(s.user.num),1)]),_:1},8,["modelValue"]),t("button",{type:"button",class:"d-flex bg-transparent d-flex p-0 border-0",disabled:s.user.num>=10,onClick:o[2]||(o[2]=m=>h.count(!0))},nt,8,et)])]),it]),_:1},8,["onSubmit"])])]))),128)),t("div",rt,[ct,e(y,{products:s.products,class:"mt-4"},null,8,["products"])])])]),e(L)],64)}const _t=k(S,[["render",at]]);export{_t as default};
